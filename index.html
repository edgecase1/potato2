<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login</title>
</head>
<body style="margin:0">
 <div id="loginContainer">
  <h2>Login</h2>
  <form id="myForm">
    <label>
      Username:
      <input type="text" name="username" required />
    </label>
    <br /><br />
    <label>
      Password:
      <input type="password" name="password" required />
    </label>
    <br /><br />
    <button type="submit">Send</button>
  </form>
 </div>
 <div id="terminalContainer" style="display: none; height:100vh; width:100%">
      <input id="commandInput" name="data" type="text" placeholder="type a command and press Enter" style="width:100%;padding:8px;font-family:monospace;margin-top:5px;" />
      <textarea readonly id="terminal" style="width:100%;height:100%;background:#111;color:#0f0;padding:10px;overflow-y:auto;font-family:monospace;border-radius:4px;"></textarea>
 </div>
 <div style="bottom:0">
     <h3>Response:</h3>
     <pre id="response"></pre>
 </div>

  <script>
     const loginContainer = document.getElementById('loginContainer');
     const terminalContainer = document.getElementById('terminalContainer');
     const response = document.getElementById('response');
     const terminal = document.getElementById('terminal');
     const commandInput = document.getElementById('commandInput');
     const myform = document.getElementById('myForm');

     commandInput.addEventListener('keydown', function (e) {
         if (e.key === 'Enter') {
             e.preventDefault();
             fetch('/api/run', { 
               method: 'POST',
               headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
               body: "command=" + commandInput.value
             }).then(res => res.text()) // or res.json() if JSON response
               .then(text => {
                   terminal.textContent = text;
                   response.textContent = "command executed successfully";
               })
               .catch(err => {
                   response.textContent = "error executing command";
               });
	 }
    });

    myform.addEventListener('submit', function (e) {
      e.preventDefault();

      const form = e.target;
      const formData = new URLSearchParams(new FormData(form));

      fetch('/api/login', { // Change to your server endpoint
        method: 'POST',
	headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: formData
      })
        .then(res => res.text()) // or res.json() if JSON response
        .then(text => {
	    localStorage.setItem('session', text);
            response.textContent = text;
	    loginContainer.style.display = 'none';
	    terminalContainer.style.display = 'block';
        })
        .catch(err => {
            response.textContent = 'Error: ' + err;
        });
    });
  </script>
</body>
</html>
